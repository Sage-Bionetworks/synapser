<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Synapse R Client Overview • synapser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Synapse R Client Overview">
<meta property="og:description" content="synapser">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">synapser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.71</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/synapser.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/docker.html">Using synapser with Docker</a>
    </li>
    <li>
      <a href="../articles/manageSynapseCredentials.html">Manage Synapse Credentials</a>
    </li>
    <li>
      <a href="../articles/systemDependencies.html">System Dependencies</a>
    </li>
    <li>
      <a href="../articles/tables.html">Tables</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/upload.html">File Upload</a>
    </li>
    <li>
      <a href="../articles/views.html">Views</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Sage-Bionetworks/synapser/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Synapse R Client Overview</h1>
                        <h4 class="author">Bruce Hoff</h4>
            
            <h4 class="date">2020-09-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Sage-Bionetworks/synapser/blob/master/vignettes/synapser.Rmd"><code>vignettes/synapser.Rmd</code></a></small>
      <div class="hidden name"><code>synapser.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>synapser</code> package provides an interface to <a href="http://www.synapse.org">Synapse</a>, a collaborative workspace for reproducible data intensive research projects, providing support for:</p>
<ul>
<li>integrated presentation of data, code and text</li>
<li>fine grained access control</li>
<li>provenance tracking</li>
</ul>
<p>The <code>synapser</code> package lets you communicate with the Synapse platform to create collaborative data analysis projects and access data using the R programming language. Other Synapse clients exist for <a href="http://docs.synapse.org/python">Python</a>, <a href="https://github.com/Sage-Bionetworks/Synapse-Repository-Services/tree/develop/client/synapseJavaClient">Java</a>, and <a href="https://www.synapse.org">the web browser</a>.</p>
<p>If you're just getting started with Synapse, have a look at the <a href="http://docs.synapse.org/articles/getting_started.html">Getting Started guides for Synapse</a>.</p>
<p>Good example projects are:</p>
<ul>
<li><a href="https://www.synapse.org/#!Synapse:syn300013">TCGA Pan-cancer (syn300013)</a></li>
<li><a href="https://www.synapse.org/#!Synapse:syn1721874">Development of a Prognostic Model for Breast Cancer Survival in an Open Challenge Environment (syn1721874)</a></li>
<li><a href="https://www.synapse.org/#!Synapse:syn1899339">Demo projects (syn1899339)</a></li>
</ul>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><code>synapser</code> is available as a ready-built package for Microsoft Windows and Mac OSX. For Linux systems, it is available to install from source. It can be installed or upgraded using the standard <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> command, adding the <a href="http://ran.synapse.org">Sage Bionetworks R Archive Network (RAN)</a> to the repository list, e.g.:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"synapser"</span>, repos = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"http://ran.synapse.org"</span>, <span class="st">"http://cran.fhcrc.org"</span>))
</pre></div>
<p>Alternatively, edit your <code>~/.Rprofile</code> and configure your default repositories:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(repos = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"http://ran.synapse.org"</span>, <span class="st">"http://cran.fhcrc.org"</span>))
</pre></div>
<p>after which you may run <code>install.packages</code> without specifying the repositories:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"synapser"</span>)
</pre></div>
<p>Please see the <a href="troubleshooting.html">Troubleshooting</a> vignettes for more information.</p>
</div>
<div id="connecting-to-synapse" class="section level2">
<h2 class="hasAnchor">
<a href="#connecting-to-synapse" class="anchor"></a>Connecting to Synapse</h2>
<p>To use Synapse, you'll need to <a href="https://www.synapse.org/#!RegisterAccount:0">register</a> for an account. The Synapse website can authenticate using a Google account, but you'll need to take the extra step of creating a Synapse password to use the programmatic clients.</p>
<p>Once that's done, you'll be able to load the library and login:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://www.synapse.org">synapser</a></span>)
<span class="co">## </span>
<span class="co">## TERMS OF USE NOTICE:</span>
<span class="co">##   When using Synapse, remember that the terms and conditions of use require that you:</span>
<span class="co">##   1) Attribute data contributors when discussing these data or results from these data.</span>
<span class="co">##   2) Not discriminate, identify, or recontact individuals or groups represented by the data.</span>
<span class="co">##   3) Use and contribute only data de-identified to HIPAA standards.</span>
<span class="co">##   4) Redistribute data only under these same terms of use.</span>
<span class="fu"><a href="../reference/synLogin.html">synLogin</a></span>()
<span class="co">## Welcome, test!</span>
<span class="co">## NULL</span>
</pre></div>
<p>For more ways to manage your Synapse credentials, please see the <a href="manageSynapseCredentials.html">Manage Synapse Credentials vignette</a>, and the native reference documentation:</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">synLogin</span>
<span class="op">?</span><span class="kw">synLogout</span>
</pre></div>
</div>
<div id="accessing-data" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-data" class="anchor"></a>Accessing Data</h2>
<p>To make the example below print useful information, we prepare a file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use hex_digits to generate random string</span>
hex_digits &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">as.character</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">9</span>), letters[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>])
projectName &lt;-<span class="st"> </span><span class="kw">sprintf</span>(<span class="st">"My unique project %s"</span>, <span class="kw">paste0</span>(<span class="kw">sample</span>(hex_digits, <span class="dv">32</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">collapse =</span> <span class="st">""</span>))
project &lt;-<span class="st"> </span><span class="kw">Project</span>(projectName)
project &lt;-<span class="st"> </span><span class="kw">synStore</span>(project)

<span class="co"># Create some files</span>
filePath &lt;-<span class="st"> </span><span class="kw">tempfile</span>()
connection &lt;-<span class="st"> </span><span class="kw">file</span>(filePath)
<span class="kw">writeChar</span>(<span class="st">"a </span><span class="ch">\t</span><span class="st"> b </span><span class="ch">\t</span><span class="st"> c </span><span class="ch">\n</span><span class="st"> d </span><span class="ch">\t</span><span class="st"> e </span><span class="ch">\t</span><span class="st"> f </span><span class="ch">\n</span><span class="st">"</span>, connection, <span class="dt">eos =</span> <span class="ot">NULL</span>)
<span class="kw">close</span>(connection)
file &lt;-<span class="st"> </span><span class="kw">File</span>(<span class="dt">path =</span> filePath, <span class="dt">parent =</span> project)
file &lt;-<span class="st"> </span><span class="kw">synStore</span>(file)
## ################################################## Uploading file to Synapse storage ##################################################
Uploading [<span class="op">--------------------</span>]<span class="fl">0.00</span>%   <span class="fl">0.0</span>bytes<span class="op">/</span><span class="fl">23.0</span>bytes  file58b45a265f08     
Uploading [####################]100.00%   23.0bytes/23.0bytes (84.6bytes/s) file58b45a265f08 Done...
synId &lt;-<span class="st"> </span>file<span class="op">$</span>properties<span class="op">$</span>id</code></pre></div>
<p>Synapse identifiers are used to refer to projects and data which are represented by <em>entity</em> objects. For example, the entity above represents a tab-delimited file containing a 2 by 3 matrix. Getting the entity retrieves an object that holds metadata describing the matrix, and also downloads the file to a local cache:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">fileEntity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGet.html">synGet</a></span>(<span class="kw">synId</span>)
</pre></div>
<p>View the entity's metadata in the R console:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw">fileEntity</span>)
<span class="co">## File: file58b45a265f08 (syn11121603)</span>
<span class="co">##   md5=8465d33d9f407ef250ce519e92f300fb</span>
<span class="co">##   fileSize=23</span>
<span class="co">##   contentType=application/octet-stream</span>
<span class="co">##   externalURL=None</span>
<span class="co">##   cacheDir=/tmp/RtmppLJ3Pk</span>
<span class="co">##   files=['file58b45a265f08']</span>
<span class="co">##   path=/tmp/RtmppLJ3Pk/file58b45a265f08</span>
<span class="co">##   synapseStore=True</span>
<span class="co">## properties:</span>
<span class="co">##   concreteType=org.sagebionetworks.repo.model.FileEntity</span>
<span class="co">##   createdBy=3333835</span>
<span class="co">##   createdOn=2020-09-16T06:20:07.536Z</span>
<span class="co">##   dataFileHandleId=2072272</span>
<span class="co">##   etag=7be79a86-7e26-4030-ab07-8a80f59bdccc</span>
<span class="co">##   id=syn11121603</span>
<span class="co">##   modifiedBy=3333835</span>
<span class="co">##   modifiedOn=2020-09-16T06:20:07.599Z</span>
<span class="co">##   name=file58b45a265f08</span>
<span class="co">##   parentId=syn11121602</span>
<span class="co">##   versionLabel=1</span>
<span class="co">##   versionNumber=1</span>
<span class="co">## annotations:</span>
</pre></div>
<p>This is one simple way to read in a small matrix (we load just the first few rows):</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span>(<span class="kw">fileEntity</span><span class="op">$</span><span class="kw">path</span>, nrows = <span class="fl">2</span>)
<span class="co">##   V1 V2 V3</span>
<span class="co">## 1  a  b  c</span>
<span class="co">## 2  d  e  f</span>
</pre></div>
<p>View the entity in the browser:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="../reference/synOnweb.html">synOnweb</a></span>(<span class="kw">synId</span>)
</pre></div>
<div id="download-location" class="section level3">
<h3 class="hasAnchor">
<a href="#download-location" class="anchor"></a>Download Location</h3>
<p>By default the download location will always be in the Synapse cache. You can specify the downloadLocation parameter.</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">entity</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGet.html">synGet</a></span>(<span class="st">"syn00123"</span>, downloadLocation = <span class="st">"/path/to/folder"</span>)
</pre></div>
<p>For more details see the native reference documentation, e.g.:</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">synGet</span>
<span class="op">?</span><span class="kw">synOnweb</span>
</pre></div>
</div>
</div>
<div id="organizing-data-in-a-project" class="section level2">
<h2 class="hasAnchor">
<a href="#organizing-data-in-a-project" class="anchor"></a>Organizing Data in a Project</h2>
<p>You can create your own projects and upload your own data sets. Synapse stores entities in a hierarchical or tree structure. Projects are at the top level and must be uniquely named:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Project.html">Project</a></span>(<span class="kw">projectName</span>)
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">project</span>)
</pre></div>
<p>Creating a folder:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">dataFolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Folder.html">Folder</a></span>(<span class="st">"Data"</span>, parent = <span class="kw">project</span>)
<span class="kw">dataFolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">dataFolder</span>)
</pre></div>
<p>Adding files to the project:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">filePath &lt;-<span class="st"> </span><span class="kw">tempfile</span>()
connection &lt;-<span class="st"> </span><span class="kw">file</span>(filePath)
<span class="kw">writeChar</span>(<span class="st">"this is the content of the file"</span>, connection, <span class="dt">eos =</span> <span class="ot">NULL</span>)
<span class="kw">close</span>(connection)
file &lt;-<span class="st"> </span><span class="kw">File</span>(<span class="dt">path =</span> filePath, <span class="dt">parent =</span> dataFolder)
file &lt;-<span class="st"> </span><span class="kw">synStore</span>(file)
## ################################################## Uploading file to Synapse storage ##################################################
Uploading [<span class="op">--------------------</span>]<span class="fl">0.00</span>%   <span class="fl">0.0</span>bytes<span class="op">/</span><span class="fl">31.0</span>bytes  file58b421613d7f     
Uploading [####################]100.00%   31.0bytes/31.0bytes (216.3bytes/s) file58b421613d7f Done...</code></pre></div>
<p>You can print the properties of an entity (such as the file we just created):</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">file</span><span class="op">$</span><span class="kw">properties</span>
<span class="co">## {</span>
<span class="co">##   "concreteType": "org.sagebionetworks.repo.model.FileEntity",</span>
<span class="co">##   "createdBy": "3333835",</span>
<span class="co">##   "createdOn": "2020-09-16T06:20:09.786Z",</span>
<span class="co">##   "dataFileHandleId": "2072273",</span>
<span class="co">##   "etag": "350192a1-1323-468f-aad0-7fe72c0098ba",</span>
<span class="co">##   "id": "syn11121605",</span>
<span class="co">##   "modifiedBy": "3333835",</span>
<span class="co">##   "modifiedOn": "2020-09-16T06:20:09.846Z",</span>
<span class="co">##   "name": "file58b421613d7f",</span>
<span class="co">##   "parentId": "syn11121604",</span>
<span class="co">##   "versionLabel": "1",</span>
<span class="co">##   "versionNumber": 1</span>
<span class="co">## }</span>
</pre></div>
<p>Most other properties are immutable, but you <em>can</em> change an entity's name:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">file</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">name</span> <span class="op">&lt;-</span> <span class="st">"different name"</span>
</pre></div>
<p>Update Synapse with the change:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">file</span>)
<span class="kw">file</span><span class="op">$</span><span class="kw">properties</span>
<span class="co">## {</span>
<span class="co">##   "concreteType": "org.sagebionetworks.repo.model.FileEntity",</span>
<span class="co">##   "createdBy": "3333835",</span>
<span class="co">##   "createdOn": "2020-09-16T06:20:09.786Z",</span>
<span class="co">##   "dataFileHandleId": "2072273",</span>
<span class="co">##   "etag": "66508cae-af3d-41d4-9801-753aea5ec47f",</span>
<span class="co">##   "id": "syn11121605",</span>
<span class="co">##   "modifiedBy": "3333835",</span>
<span class="co">##   "modifiedOn": "2020-09-16T06:20:10.866Z",</span>
<span class="co">##   "name": "different name",</span>
<span class="co">##   "parentId": "syn11121604",</span>
<span class="co">##   "versionLabel": "2",</span>
<span class="co">##   "versionNumber": 2</span>
<span class="co">## }</span>
</pre></div>
<p>You can list all children of an entity:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">children</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetChildren.html">synGetChildren</a></span>(<span class="kw">project</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>)
<span class="fu"><a href="../reference/as.list.html">as.list</a></span>(<span class="kw">children</span>)
<span class="co">## [[1]]</span>
<span class="co">## [[1]]$name</span>
<span class="co">## [1] "Data"</span>
<span class="co">## </span>
<span class="co">## [[1]]$id</span>
<span class="co">## [1] "syn11121604"</span>
<span class="co">## </span>
<span class="co">## [[1]]$type</span>
<span class="co">## [1] "org.sagebionetworks.repo.model.Folder"</span>
<span class="co">## </span>
<span class="co">## [[1]]$versionNumber</span>
<span class="co">## [1] 1</span>
<span class="co">## </span>
<span class="co">## [[1]]$versionLabel</span>
<span class="co">## [1] "1"</span>
<span class="co">## </span>
<span class="co">## [[1]]$benefactorId</span>
<span class="co">## [1] 11121602</span>
<span class="co">## </span>
<span class="co">## [[1]]$createdOn</span>
<span class="co">## [1] "2020-09-16T06:20:08.700Z"</span>
<span class="co">## </span>
<span class="co">## [[1]]$modifiedOn</span>
<span class="co">## [1] "2020-09-16T06:20:08.760Z"</span>
<span class="co">## </span>
<span class="co">## [[1]]$createdBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## [[1]]$modifiedBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## [[2]]</span>
<span class="co">## [[2]]$name</span>
<span class="co">## [1] "file58b45a265f08"</span>
<span class="co">## </span>
<span class="co">## [[2]]$id</span>
<span class="co">## [1] "syn11121603"</span>
<span class="co">## </span>
<span class="co">## [[2]]$type</span>
<span class="co">## [1] "org.sagebionetworks.repo.model.FileEntity"</span>
<span class="co">## </span>
<span class="co">## [[2]]$versionNumber</span>
<span class="co">## [1] 1</span>
<span class="co">## </span>
<span class="co">## [[2]]$versionLabel</span>
<span class="co">## [1] "1"</span>
<span class="co">## </span>
<span class="co">## [[2]]$benefactorId</span>
<span class="co">## [1] 11121602</span>
<span class="co">## </span>
<span class="co">## [[2]]$createdOn</span>
<span class="co">## [1] "2020-09-16T06:20:07.536Z"</span>
<span class="co">## </span>
<span class="co">## [[2]]$modifiedOn</span>
<span class="co">## [1] "2020-09-16T06:20:07.599Z"</span>
<span class="co">## </span>
<span class="co">## [[2]]$createdBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## [[2]]$modifiedBy</span>
<span class="co">## [1] "3333835"</span>
</pre></div>
<p>You can also filter by type:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">filesAndFolders</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetChildren.html">synGetChildren</a></span>(<span class="kw">project</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>, includeTypes = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"file"</span>, <span class="st">"folder"</span>))
<span class="fu"><a href="../reference/as.list.html">as.list</a></span>(<span class="kw">filesAndFolders</span>)
<span class="co">## [[1]]</span>
<span class="co">## [[1]]$name</span>
<span class="co">## [1] "Data"</span>
<span class="co">## </span>
<span class="co">## [[1]]$id</span>
<span class="co">## [1] "syn11121604"</span>
<span class="co">## </span>
<span class="co">## [[1]]$type</span>
<span class="co">## [1] "org.sagebionetworks.repo.model.Folder"</span>
<span class="co">## </span>
<span class="co">## [[1]]$versionNumber</span>
<span class="co">## [1] 1</span>
<span class="co">## </span>
<span class="co">## [[1]]$versionLabel</span>
<span class="co">## [1] "1"</span>
<span class="co">## </span>
<span class="co">## [[1]]$benefactorId</span>
<span class="co">## [1] 11121602</span>
<span class="co">## </span>
<span class="co">## [[1]]$createdOn</span>
<span class="co">## [1] "2020-09-16T06:20:08.700Z"</span>
<span class="co">## </span>
<span class="co">## [[1]]$modifiedOn</span>
<span class="co">## [1] "2020-09-16T06:20:08.760Z"</span>
<span class="co">## </span>
<span class="co">## [[1]]$createdBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## [[1]]$modifiedBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## [[2]]</span>
<span class="co">## [[2]]$name</span>
<span class="co">## [1] "file58b45a265f08"</span>
<span class="co">## </span>
<span class="co">## [[2]]$id</span>
<span class="co">## [1] "syn11121603"</span>
<span class="co">## </span>
<span class="co">## [[2]]$type</span>
<span class="co">## [1] "org.sagebionetworks.repo.model.FileEntity"</span>
<span class="co">## </span>
<span class="co">## [[2]]$versionNumber</span>
<span class="co">## [1] 1</span>
<span class="co">## </span>
<span class="co">## [[2]]$versionLabel</span>
<span class="co">## [1] "1"</span>
<span class="co">## </span>
<span class="co">## [[2]]$benefactorId</span>
<span class="co">## [1] 11121602</span>
<span class="co">## </span>
<span class="co">## [[2]]$createdOn</span>
<span class="co">## [1] "2020-09-16T06:20:07.536Z"</span>
<span class="co">## </span>
<span class="co">## [[2]]$modifiedOn</span>
<span class="co">## [1] "2020-09-16T06:20:07.599Z"</span>
<span class="co">## </span>
<span class="co">## [[2]]$createdBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## [[2]]$modifiedBy</span>
<span class="co">## [1] "3333835"</span>
</pre></div>
<p>You can avoid reading all children into memory at once by iterating through one at a time:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">children</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetChildren.html">synGetChildren</a></span>(<span class="kw">project</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>)
<span class="fu"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span>({
  <span class="co">while</span> (<span class="fl">TRUE</span>) {
    <span class="kw">child</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nextElem.html">nextElem</a></span>(<span class="kw">children</span>)
    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw">child</span>)
  }
}, error = <span class="fu">function</span>(<span class="kw">e</span>) {
    <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="st">"Reached end of list."</span>)
})
<span class="co">## $name</span>
<span class="co">## [1] "Data"</span>
<span class="co">## </span>
<span class="co">## $id</span>
<span class="co">## [1] "syn11121604"</span>
<span class="co">## </span>
<span class="co">## $type</span>
<span class="co">## [1] "org.sagebionetworks.repo.model.Folder"</span>
<span class="co">## </span>
<span class="co">## $versionNumber</span>
<span class="co">## [1] 1</span>
<span class="co">## </span>
<span class="co">## $versionLabel</span>
<span class="co">## [1] "1"</span>
<span class="co">## </span>
<span class="co">## $benefactorId</span>
<span class="co">## [1] 11121602</span>
<span class="co">## </span>
<span class="co">## $createdOn</span>
<span class="co">## [1] "2020-09-16T06:20:08.700Z"</span>
<span class="co">## </span>
<span class="co">## $modifiedOn</span>
<span class="co">## [1] "2020-09-16T06:20:08.760Z"</span>
<span class="co">## </span>
<span class="co">## $createdBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## $modifiedBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## $name</span>
<span class="co">## [1] "file58b45a265f08"</span>
<span class="co">## </span>
<span class="co">## $id</span>
<span class="co">## [1] "syn11121603"</span>
<span class="co">## </span>
<span class="co">## $type</span>
<span class="co">## [1] "org.sagebionetworks.repo.model.FileEntity"</span>
<span class="co">## </span>
<span class="co">## $versionNumber</span>
<span class="co">## [1] 1</span>
<span class="co">## </span>
<span class="co">## $versionLabel</span>
<span class="co">## [1] "1"</span>
<span class="co">## </span>
<span class="co">## $benefactorId</span>
<span class="co">## [1] 11121602</span>
<span class="co">## </span>
<span class="co">## $createdOn</span>
<span class="co">## [1] "2020-09-16T06:20:07.536Z"</span>
<span class="co">## </span>
<span class="co">## $modifiedOn</span>
<span class="co">## [1] "2020-09-16T06:20:07.599Z"</span>
<span class="co">## </span>
<span class="co">## $createdBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## $modifiedBy</span>
<span class="co">## [1] "3333835"</span>
<span class="co">## </span>
<span class="co">## [1] "Reached end of list."</span>
</pre></div>
<p>You can move files to a different parent:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">newFolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Folder.html">Folder</a></span>(<span class="st">"New Parent"</span>, parent = <span class="kw">project</span>)
<span class="kw">newFolder</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">newFolder</span>)

<span class="kw">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synMove.html">synMove</a></span>(<span class="kw">file</span>, <span class="kw">newFolder</span>)
</pre></div>
<p>Content can be deleted:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="../reference/synDelete.html">synDelete</a></span>(<span class="kw">file</span>)
<span class="co">## NULL</span>
</pre></div>
<p>Deletion of a project will also delete its contents, in this case the folder:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">folderId</span> <span class="op">&lt;-</span> <span class="kw">dataFolder</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>
<span class="fu"><a href="../reference/synDelete.html">synDelete</a></span>(<span class="kw">project</span>)
<span class="co">## NULL</span>
<span class="fu"><a href="https://rdrr.io/r/base/conditions.html">tryCatch</a></span>(
  <span class="fu"><a href="../reference/synGet.html">synGet</a></span>(<span class="kw">folderId</span>),
  error = <span class="fu">function</span>(<span class="kw">e</span>) {
    <span class="fu"><a href="https://rdrr.io/r/base/message.html">message</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span>(<span class="st">"Retrieving a deleted folder causes: %s"</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(<span class="kw">e</span>)))
  },
  silent = <span class="fl">TRUE</span>
)
<span class="co">## Retrieving a deleted folder causes: Error in value[[3L]](cond): 404 Client Error: </span>
<span class="co">## Entity syn11121604 is in trash can.</span>
</pre></div>
<p>In addition to simple data storage, Synapse entities can be annotated with key/value metadata, described in markdown documents (wikis), and linked together in provenance graphs to create a reproducible record of a data analysis pipeline.</p>
<p>For more details see the native reference documentation, e.g.:</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">Project</span>
<span class="op">?</span><span class="kw">Folder</span>
<span class="op">?</span><span class="kw">File</span>
<span class="op">?</span><span class="kw">Link</span>
<span class="op">?</span><span class="kw">synStore</span>
</pre></div>
</div>
<div id="annotating-synapse-entities" class="section level2">
<h2 class="hasAnchor">
<a href="#annotating-synapse-entities" class="anchor"></a>Annotating Synapse Entities</h2>
<div class="sourceCode"><pre class="downlit">
<span class="co"># (We use a time stamp just to help ensure uniqueness.)</span>
<span class="kw">projectName</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span>(<span class="st">"My unique project created on %s"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span>(), <span class="st">"%a %b %d %H%M%OS4 %Y"</span>))
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Project.html">Project</a></span>(<span class="kw">projectName</span>)
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">project</span>)
</pre></div>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="../reference/synSetAnnotations.html">synSetAnnotations</a></span>(<span class="kw">project</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(annotationName = <span class="st">"annotationValue"</span>))
<span class="co">## $annotationName</span>
<span class="co">## $annotationName[[1]]</span>
<span class="co">## [1] "annotationValue"</span>
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGet.html">synGet</a></span>(<span class="kw">project</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>)
<span class="kw">project</span><span class="op">$</span><span class="kw">annotations</span>
<span class="co">## {</span>
<span class="co">##   "annotationName": [</span>
<span class="co">##     "annotationValue"</span>
<span class="co">##   ]</span>
<span class="co">## }</span>
<span class="fu"><a href="../reference/synGetAnnotations.html">synGetAnnotations</a></span>(<span class="kw">project</span>)
<span class="co">## $annotationName</span>
<span class="co">## $annotationName[[1]]</span>
<span class="co">## [1] "annotationValue"</span>
</pre></div>
<p><code>synSetAnnotations</code> will replace all the existing annotations with the given annotations. Hence, to add a new annotation to the ones currently defined for an entity, we must retrieve it:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetAnnotations.html">synGetAnnotations</a></span>(<span class="kw">project</span>)
<span class="kw">annotations</span>[[<span class="st">"numeric_annotation_name"</span>]] <span class="op">&lt;-</span> <span class="fl">42</span>
<span class="kw">annotations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synSetAnnotations.html">synSetAnnotations</a></span>(<span class="kw">project</span>, <span class="kw">annotations</span>)
<span class="kw">annotations</span>
<span class="co">## $annotationName</span>
<span class="co">## $annotationName[[1]]</span>
<span class="co">## [1] "annotationValue"</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## $numeric_annotation_name</span>
<span class="co">## $numeric_annotation_name[[1]]</span>
<span class="co">## [1] 42</span>
</pre></div>
</div>
<div id="provenance" class="section level2">
<h2 class="hasAnchor">
<a href="#provenance" class="anchor"></a>Provenance</h2>
<p>Synapse provides tools for tracking 'provenance', or the transformation of raw data into processed results, by linking derived data objects to source data and the code used to perform the transformation.</p>
<p>The Activity object represents the source of a data set or the data processing steps used to produce it. Using <a href="http://www.w3.org/2011/prov/wiki/Main_Page">W3C provenance</a> ontology terms, a result is generated by a combination of data and code which are either used or executed.</p>
<div id="creating-an-activity-object" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-an-activity-object" class="anchor"></a>Creating an activity object:</h3>
<div class="sourceCode"><pre class="downlit">
<span class="kw">act</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Activity.html">Activity</a></span>(
  name = <span class="st">"clustering"</span>,
  description = <span class="st">"whizzy clustering"</span>,
  used = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"syn1234"</span>, <span class="st">"syn1235"</span>),
  executed = <span class="st">"syn4567"</span>)
</pre></div>
<p>Here, syn1234 and syn1235 might be two types of measurements on a common set of samples. Some whizzy clustering code might be referred to by syn4567.</p>
<p>Alternatively, you can build an activity up piecemeal:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">act</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Activity.html">Activity</a></span>(name = <span class="st">"clustering"</span>, description = <span class="st">"whizzy clustering"</span>)
<span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"syn12345"</span>, <span class="st">"syn12346"</span>))
<span class="co">## NULL</span>
<span class="kw">act</span><span class="op">$</span><span class="fu">executed</span>(<span class="st">"syn4567"</span>)
<span class="co">## NULL</span>
</pre></div>
<p>The used and executed can reference entities in Synapse or URLs.</p>
<p>Entity examples:</p>
<div class="sourceCode"><pre class="downlit">
  <span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(<span class="st">"syn12345"</span>)
<span class="co">## NULL</span>
  <span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(<span class="kw">project</span>)
<span class="co">## NULL</span>
  <span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(target = <span class="st">"syn12345"</span>, targetVersion = <span class="fl">2</span>)
<span class="co">## NULL</span>
</pre></div>
<p>URL examples:</p>
<div class="sourceCode"><pre class="downlit">
  <span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(<span class="st">"http://mydomain.com/my/awesome/data.RData"</span>)
<span class="co">## NULL</span>
  <span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(url = <span class="st">"http://mydomain.com/my/awesome/data.RData"</span>, name = <span class="st">"Awesome Data"</span>)
<span class="co">## NULL</span>
  <span class="kw">act</span><span class="op">$</span><span class="fu">used</span>(url = <span class="st">"https://github.com/joe_hacker/code_repo"</span>, name = <span class="st">"Gnarly hacks"</span>, wasExecuted = <span class="fl">TRUE</span>)
<span class="co">## NULL</span>
</pre></div>
</div>
<div id="storing-entities-with-provenance" class="section level3">
<h3 class="hasAnchor">
<a href="#storing-entities-with-provenance" class="anchor"></a>Storing entities with provenance</h3>
<p>The activity can be passed in when storing an Entity to set the Entity’s provenance:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGet.html">synGet</a></span>(<span class="kw">project</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>)
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">project</span>, activity = <span class="kw">act</span>)
</pre></div>
<p>We’ve now recorded that 'project' is the output of syn4567 applied to the data stored in syn1234 and syn1235.</p>
</div>
<div id="recording-data-source" class="section level3">
<h3 class="hasAnchor">
<a href="#recording-data-source" class="anchor"></a>Recording data source</h3>
<p>The synStore() has shortcuts for specifying the used and executed lists directly. For example, when storing a data entity, it’s a good idea to record its source:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(
  <span class="kw">project</span>,
  activityName = <span class="st">"data-r-us"</span>,
  activityDescription = <span class="st">"downloaded from data-r-us"</span>,
  used = <span class="st">"http://data-r-us.com/excellent/data.xyz"</span>)
</pre></div>
<p>For more information:</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">Activity</span>
<span class="op">?</span><span class="kw">synDeleteProvenance</span>
</pre></div>
</div>
</div>
<div id="tables" class="section level2">
<h2 class="hasAnchor">
<a href="#tables" class="anchor"></a>Tables</h2>
<p>Tables can be built up by adding sets of rows that follow a user-defined schema and queried using a SQL-like syntax. Please visit the <a href="tables.html">Table vignettes</a> for more information.</p>
</div>
<div id="wikis" class="section level2">
<h2 class="hasAnchor">
<a href="#wikis" class="anchor"></a>Wikis</h2>
<p>Wiki pages can be attached to an Synapse entity (i.e. project, folder, file, etc). Text and graphics can be composed in markdown and rendered in the web view of the object.</p>
<p>Creating a Wiki</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">project &lt;-<span class="st"> </span><span class="kw">synGet</span>(project<span class="op">$</span>properties<span class="op">$</span>id)
content &lt;-<span class="st"> "</span>
<span class="st"># My Wiki Page</span>

<span class="st">Here is a description of my **fantastic** project!</span>
<span class="st">"</span>
<span class="co"># attachment</span>
filePath &lt;-<span class="st"> </span><span class="kw">tempfile</span>()
connection &lt;-<span class="st"> </span><span class="kw">file</span>(filePath)
<span class="kw">writeChar</span>(<span class="st">"this is the content of the file"</span>, connection, <span class="dt">eos =</span> <span class="ot">NULL</span>)
<span class="kw">close</span>(connection)

wiki &lt;-<span class="st"> </span><span class="kw">Wiki</span>(<span class="dt">owner =</span> project,
             <span class="dt">title =</span> <span class="st">"My Wiki Page"</span>,
             <span class="dt">markdown =</span> content,
             <span class="dt">attachments =</span> <span class="kw">list</span>(filePath))
wiki &lt;-<span class="st"> </span><span class="kw">synStore</span>(wiki)
## 
Uploading [<span class="op">--------------------</span>]<span class="fl">0.00</span>%   <span class="fl">0.0</span>bytes<span class="op">/</span><span class="fl">31.0</span>bytes  file58b4535cf165     
Uploading [####################]100.00%   31.0bytes/31.0bytes (139.1bytes/s) file58b4535cf165 Done...</code></pre></div>
<p>Updating a Wiki</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">project &lt;-<span class="st"> </span><span class="kw">synGet</span>(project<span class="op">$</span>properties<span class="op">$</span>id)
wiki &lt;-<span class="st"> </span><span class="kw">synGetWiki</span>(project)
## 
Downloading  [####################]100.00%   86.0bytes/86.0bytes (80.7kB/s) 2072275.md Done...
wiki.markdown &lt;-<span class="st"> "</span>
<span class="st"># My Wiki Page</span>

<span class="st">Here is a description of my **fantastic** project! Let's</span>
<span class="st">*emphasize* the important stuff.</span>
<span class="st">"</span>

wiki &lt;-<span class="st"> </span><span class="kw">synStore</span>(wiki)</code></pre></div>
<p>For more information:</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">Wiki</span>
<span class="op">?</span><span class="kw">synGetWiki</span>
</pre></div>
</div>
<div id="evaluations" class="section level2">
<h2 class="hasAnchor">
<a href="#evaluations" class="anchor"></a>Evaluations</h2>
<p>An Evaluation is a Synapse construct useful for building processing pipelines and for scoring predictive modeling and data analysis challenges.</p>
<p>Creating an Evaluation:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Evaluation.html">Evaluation</a></span>(
  name = <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span>(<span class="st">"My unique evaluation created on %s"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span>(), <span class="st">"%a %b %d %H%M%OS4 %Y"</span>)),
  description = <span class="st">"testing"</span>,
  contentSource = <span class="kw">project</span><span class="op">$</span><span class="kw">properties</span><span class="op">$</span><span class="kw">id</span>,
  submissionReceiptMessage = <span class="st">"Thank you for your submission!"</span>,
  submissionInstructionsMessage = <span class="st">"This evaluation only accepts files."</span>)
<span class="kw">eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">eval</span>)
</pre></div>
<p>Retrieving the created Evaluation:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">eval</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetEvaluation.html">synGetEvaluation</a></span>(<span class="kw">eval</span><span class="op">$</span><span class="kw">id</span>)
<span class="kw">eval</span>
<span class="co">## {</span>
<span class="co">##   "contentSource": "syn11121607",</span>
<span class="co">##   "createdOn": "2020-09-16T06:20:19.698Z",</span>
<span class="co">##   "description": "testing",</span>
<span class="co">##   "etag": "2bd25d88-c3f2-41a5-840b-9481a21e8b6d",</span>
<span class="co">##   "id": "9618087",</span>
<span class="co">##   "name": "My unique evaluation created on Wed Sep 16 062019.5342 2020",</span>
<span class="co">##   "ownerId": "3333835",</span>
<span class="co">##   "status": "OPEN",</span>
<span class="co">##   "submissionInstructionsMessage": "This evaluation only accepts files.",</span>
<span class="co">##   "submissionReceiptMessage": "Thank you for your submission!"</span>
<span class="co">## }</span>
</pre></div>
<p>Submitting a file to an existing Evaluation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># first create a file to submit</span>
filePath &lt;-<span class="st"> </span><span class="kw">tempfile</span>()
connection &lt;-<span class="st"> </span><span class="kw">file</span>(filePath)
<span class="kw">writeChar</span>(<span class="st">"this is my first submission"</span>, connection, <span class="dt">eos =</span> <span class="ot">NULL</span>)
<span class="kw">close</span>(connection)
file &lt;-<span class="st"> </span><span class="kw">File</span>(<span class="dt">path =</span> filePath, <span class="dt">parent =</span> project)
file &lt;-<span class="st"> </span><span class="kw">synStore</span>(file)
## ################################################## Uploading file to Synapse storage ##################################################
Uploading [<span class="op">--------------------</span>]<span class="fl">0.00</span>%   <span class="fl">0.0</span>bytes<span class="op">/</span><span class="fl">27.0</span>bytes  file58b44f89c15e     
Uploading [####################]100.00%   27.0bytes/27.0bytes (168.7bytes/s) file58b44f89c15e Done...
<span class="co"># submit the created file</span>
submission &lt;-<span class="st"> </span><span class="kw">synSubmit</span>(eval, file)
## Thank you for your submission!</code></pre></div>
<p>List submissions:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">submissions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetSubmissionBundles.html">synGetSubmissionBundles</a></span>(<span class="kw">eval</span>)
<span class="fu"><a href="../reference/as.list.html">as.list</a></span>(<span class="kw">submissions</span>)
<span class="co">## [[1]]</span>
<span class="co">## [[1]][[1]]</span>
<span class="co">## {</span>
<span class="co">##   "contributors": [</span>
<span class="co">##     {</span>
<span class="co">##       "createdOn": "2020-09-16T06:20:22.207Z",</span>
<span class="co">##       "principalId": "3333835"</span>
<span class="co">##     }</span>
<span class="co">##   ],</span>
<span class="co">##   "createdOn": "2020-09-16T06:20:22.207Z",</span>
<span class="co">##   "entityBundleJSON": "{\"entity\":{\"name\":\"file58b44f89c15e\",\"id\":\"syn11121608\",\"etag\":\"963eee26-58d5-4d3c-bbb4-602abdac04d1\",\"createdOn\":\"2020-09-16T06:20:21.397Z\",\"modifiedOn\":\"2020-09-16T06:20:21.456Z\",\"createdBy\":\"3333835\",\"modifiedBy\":\"3333835\",\"parentId\":\"syn11121607\",\"concreteType\":\"org.sagebionetworks.repo.model.FileEntity\",\"versionNumber\":1,\"versionLabel\":\"1\",\"dataFileHandleId\":\"2072277\"},\"entityType\":\"file\",\"annotations\":{\"id\":\"syn11121608\",\"etag\":\"00000000-0000-0000-0000-000000000000\",\"annotations\":{}},\"fileHandles\":[{\"id\":\"2072277\",\"etag\":\"503944c9-3752-41ed-a163-d81cd342907d\",\"createdBy\":\"3333835\",\"createdOn\":\"2020-09-16T06:20:21.000Z\",\"concreteType\":\"org.sagebionetworks.repo.model.file.S3FileHandle\",\"contentType\":\"application/octet-stream\",\"contentMd5\":\"3f466b7f85d184292a68cea1c4f7cfc2\",\"fileName\":\"file58b44f89c15e\",\"storageLocationId\":1,\"contentSize\":27,\"bucketName\":\"devdata.sagebase.org\",\"key\":\"3333835/9414df0b-825e-481c-a940-acc467476a69/file58b44f89c15e\",\"isPreview\":false}]}",</span>
<span class="co">##   "entityId": "syn11121608",</span>
<span class="co">##   "evaluationId": "9618087",</span>
<span class="co">##   "id": "9662503",</span>
<span class="co">##   "name": "file58b44f89c15e",</span>
<span class="co">##   "userId": "3333835",</span>
<span class="co">##   "versionNumber": 1</span>
<span class="co">## }</span>
<span class="co">## </span>
<span class="co">## [[1]][[2]]</span>
<span class="co">## {</span>
<span class="co">##   "entityId": "syn11121608",</span>
<span class="co">##   "etag": "fbbb7fa4-ce43-4d09-86bd-4cecd26c58ad",</span>
<span class="co">##   "id": "9662503",</span>
<span class="co">##   "modifiedOn": "2020-09-16T06:20:22.207Z",</span>
<span class="co">##   "status": "RECEIVED",</span>
<span class="co">##   "statusVersion": 0,</span>
<span class="co">##   "submissionAnnotations": {},</span>
<span class="co">##   "versionNumber": 1</span>
<span class="co">## }</span>
</pre></div>
<p>Retrieving submission by id:</p>
<div class="sourceCode"><pre class="downlit">
<span class="co"># Not evaluating this section because of SYNPY-235</span>
<span class="kw">submission</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetSubmission.html">synGetSubmission</a></span>(<span class="kw">submission</span><span class="op">$</span><span class="kw">id</span>)
<span class="kw">submission</span>
</pre></div>
<p>Retrieving the submission status:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">submissionStatus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synGetSubmissionStatus.html">synGetSubmissionStatus</a></span>(<span class="kw">submission</span>)
<span class="kw">submissionStatus</span>
<span class="co">## {</span>
<span class="co">##   "entityId": "syn11121608",</span>
<span class="co">##   "etag": "fbbb7fa4-ce43-4d09-86bd-4cecd26c58ad",</span>
<span class="co">##   "id": "9662503",</span>
<span class="co">##   "modifiedOn": "2020-09-16T06:20:22.207Z",</span>
<span class="co">##   "status": "RECEIVED",</span>
<span class="co">##   "statusVersion": 0,</span>
<span class="co">##   "submissionAnnotations": {},</span>
<span class="co">##   "versionNumber": 1</span>
<span class="co">## }</span>
</pre></div>
<p>To view the annotations:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">submissionStatus</span><span class="op">$</span><span class="kw">annotations</span>
<span class="co">## NULL</span>
</pre></div>
<p>To update an annotation:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">submissionStatus</span><span class="op">$</span><span class="kw">annotations</span>[<span class="st">"doubleAnnos"</span>] <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"rank"</span> = <span class="fl">3</span>))
<span class="fu"><a href="../reference/synStore.html">synStore</a></span>(<span class="kw">submissionStatus</span>)
</pre></div>
<p>Query an evaluation:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">queryString</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span>(<span class="st">"query=select * from evaluation_%s LIMIT %s OFFSET %s'"</span>, <span class="kw">eval</span><span class="op">$</span><span class="kw">id</span>, <span class="fl">10</span>, <span class="fl">0</span>)
<span class="fu"><a href="../reference/synRestGET.html">synRestGET</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="st">"/evaluation/submission/query?"</span>, <span class="fu"><a href="https://rdrr.io/r/utils/URLencode.html">URLencode</a></span>(<span class="kw">queryString</span>), sep = <span class="st">""</span>))
<span class="co">## $headers</span>
<span class="co">## list()</span>
<span class="co">## </span>
<span class="co">## $rows</span>
<span class="co">## list()</span>
<span class="co">## </span>
<span class="co">## $totalNumberOfResults</span>
<span class="co">## [1] 0</span>
</pre></div>
<p>To learn more about writing an evaluation query, please see: <a href="http://docs.synapse.org/rest/GET/evaluation/submission/query.html" class="uri">http://docs.synapse.org/rest/GET/evaluation/submission/query.html</a></p>
<p>For more information, please see:</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">synGetEvaluation</span>
<span class="op">?</span><span class="kw">synSubmit</span>
<span class="op">?</span><span class="kw">synGetSubmissionBundles</span>
<span class="op">?</span><span class="kw">synGetSubmission</span>
<span class="op">?</span><span class="kw">synGetSubmissionStatus</span>
</pre></div>
</div>
<div id="sharing-access-to-content" class="section level2">
<h2 class="hasAnchor">
<a href="#sharing-access-to-content" class="anchor"></a>Sharing Access to Content</h2>
<p>By default, data sets in Synapse are private to your user account, but they can easily be shared with specific users, groups, or the public.</p>
<p>Retrieve the sharing setting on an entity:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="../reference/synGetPermissions.html">synGetPermissions</a></span>(<span class="kw">project</span>, principalId = <span class="fl">273950</span>)
<span class="co">## list()</span>
</pre></div>
<p>The first time an entity is shared, an ACL object is created for that entity. Let's make project public:</p>
<div class="sourceCode"><pre class="downlit">
<span class="kw">acl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/synSetPermissions.html">synSetPermissions</a></span>(<span class="kw">project</span>, principalId = <span class="fl">273949</span>, accessType = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="st">"READ"</span>))
<span class="kw">acl</span>
<span class="co">## $id</span>
<span class="co">## [1] "syn11121607"</span>
<span class="co">## </span>
<span class="co">## $creationDate</span>
<span class="co">## [1] "2020-09-16T06:20:13.852Z"</span>
<span class="co">## </span>
<span class="co">## $etag</span>
<span class="co">## [1] "800d4abf-0114-4bde-8f21-0381cca62110"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess</span>
<span class="co">## $resourceAccess[[1]]</span>
<span class="co">## $resourceAccess[[1]]$principalId</span>
<span class="co">## [1] 3333835</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType</span>
<span class="co">## $resourceAccess[[1]]$accessType[[1]]</span>
<span class="co">## [1] "DELETE"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[2]]</span>
<span class="co">## [1] "MODERATE"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[3]]</span>
<span class="co">## [1] "CREATE"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[4]]</span>
<span class="co">## [1] "UPDATE"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[5]]</span>
<span class="co">## [1] "CHANGE_PERMISSIONS"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[6]]</span>
<span class="co">## [1] "DOWNLOAD"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[7]]</span>
<span class="co">## [1] "READ"</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[1]]$accessType[[8]]</span>
<span class="co">## [1] "CHANGE_SETTINGS"</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[2]]</span>
<span class="co">## $resourceAccess[[2]]$principalId</span>
<span class="co">## [1] 273949</span>
<span class="co">## </span>
<span class="co">## $resourceAccess[[2]]$accessType</span>
<span class="co">## $resourceAccess[[2]]$accessType[[1]]</span>
<span class="co">## [1] "READ"</span>
</pre></div>
<p>Now public can read:</p>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="../reference/synGetPermissions.html">synGetPermissions</a></span>(<span class="kw">project</span>, principalId = <span class="fl">273950</span>)
<span class="co">## list()</span>
</pre></div>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">synGetPermissions</span>
<span class="op">?</span><span class="kw">synSetPermissions</span>
</pre></div>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="../reference/synDelete.html">synDelete</a></span>(<span class="kw">project</span>)
<span class="co">## NULL</span>
</pre></div>
</div>
<div id="file-views" class="section level2">
<h2 class="hasAnchor">
<a href="#file-views" class="anchor"></a>File Views</h2>
<p>A file view can be defined by its scope. It allows querying for FileEntity within the scope using a SQL-like syntax. Please visit the <a href="views.html">Views vignettes</a> for more information.</p>
</div>
<div id="accessing-the-api-directly" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-the-api-directly" class="anchor"></a>Accessing the API Directly</h2>
<p>These methods enable access to the Synapse REST(ish) API taking care of details like endpoints and authentication. See the <a href="%3Chttp://docs.synapse.org/rest/">REST API documentation</a>.</p>
<div class="sourceCode"><pre class="downlit">
<span class="op">?</span><span class="kw">synRestGET</span>
<span class="op">?</span><span class="kw">synRestPOST</span>
<span class="op">?</span><span class="kw">synRestPUT</span>
<span class="op">?</span><span class="kw">synRestDELETE</span>
</pre></div>
</div>
<div id="synapse-utilities" class="section level2">
<h2 class="hasAnchor">
<a href="#synapse-utilities" class="anchor"></a>Synapse Utilities</h2>
<p>We provide some utility functions in the <a href="https://github.com/Sage-Bionetworks/synapserutils">synapserutils</a> package:</p>
<ul>
<li>Copy Files, Folders, Tables, Links, Projects, and Wiki Pages.</li>
<li>Upload data to Synapse in bulk.</li>
<li>Download data from Synapse in bulk.</li>
</ul>
<p>Please visit the <a href="https://github.com/Sage-Bionetworks/synapserutils">synapserutils Github repository</a> for instructions on how to download.</p>
</div>
<div id="more-information" class="section level2">
<h2 class="hasAnchor">
<a href="#more-information" class="anchor"></a>More information</h2>
<p>For more information see the <a href="http://docs.synapse.org/articles/">Synapse User Guide</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bruce Hoff, Kimyen Ladia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
