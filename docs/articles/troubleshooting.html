<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Troubleshooting • synapser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Troubleshooting">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">synapser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/synapser.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/buildingDocPages.html">Building Documentation Pages for synapser</a>
    </li>
    <li>
      <a href="../articles/docker.html">Docker</a>
    </li>
    <li>
      <a href="../articles/installation.html">Installation</a>
    </li>
    <li>
      <a href="../articles/manageSynapseCredentials.html">Manage Synapse Credentials</a>
    </li>
    <li>
      <a href="../articles/systemDependencies.html">System Dependencies</a>
    </li>
    <li>
      <a href="../articles/tables.html">Tables</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/upload.html">File Upload</a>
    </li>
    <li>
      <a href="../articles/views.html">Views</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Sage-Bionetworks/synapser/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Troubleshooting</h1>
                        <h4 data-toc-skip class="author">Tom Yu</h4>
            
            <h4 data-toc-skip class="date">2025-07-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Sage-Bionetworks/synapser/blob/HEAD/vignettes/troubleshooting.Rmd" class="external-link"><code>vignettes/troubleshooting.Rmd</code></a></small>
      <div class="hidden name"><code>troubleshooting.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="build-synapser">Build Synapser<a class="anchor" aria-label="anchor" href="#build-synapser"></a>
</h3>
<p>When You install Synapser, You may encounter a similar error:</p>
<pre class="console"><code>$ R CMD BUILD .

Execution halted
ERROR: configuration failed for package ‘synapser’
* removing ‘/private/var/folders/2n/xwh21m9s3sq_mhnkbc6n6z_c0000gn/T/RtmpZ47UPP/Rinstf55478c3f09/synapser’</code></pre>
<p>For this error, You can try first remove $HOME.virtualenvs then run
the build command again.</p>
</div>
<div class="section level3">
<h3 id="build-synapser-when-creating-vignettes">Build Synapser when creating vignettes<a class="anchor" aria-label="anchor" href="#build-synapser-when-creating-vignettes"></a>
</h3>
<p>When you build synapser, you may encounter the following error:</p>
<pre class="console"><code>$ R CMD BUILD .

Error: processing vignette 'upload.Rmd' failed with diagnostics:
No credentials provided.
--- failed re-building ‘upload.Rmd’</code></pre>
<p>First, create a file named <code>.synapseConfig</code> in your home
directory. Then add the following lines to the file:</p>
<pre class="console"><code>[authentication]
authtoken = &lt;authtoken&gt;</code></pre>
<p>Now, you should be able to build Synapser.</p>
</div>
<div class="section level3">
<h3 id="dependency-conflicts-rjsonreticulate">Dependency Conflicts (rjson/reticulate)<a class="anchor" aria-label="anchor" href="#dependency-conflicts-rjsonreticulate"></a>
</h3>
<p>If you encounter errors related to rjson version conflicts during
installation, such as:</p>
<pre><code>Error in loadNamespace(j &lt;- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]) :
  namespace 'rjson' 0.2.23 is being loaded, but &lt;= 0.2.21 is required
Calls: &lt;Anonymous&gt; ... namespaceImportFrom -&gt; asNamespace -&gt; loadNamespace
Execution halted
ERROR: lazy loading failed for package 'synapser'</code></pre>
<p>This occurs when you have a newer version of rjson installed that is
incompatible with synapser. <strong>The best solution is to use the
recommended installation method:</strong></p>
<p><strong>Recommended Solution:</strong></p>
<p>For the latest version:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install remotes if not already installed</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Install the latest version of synapser (this automatically handles dependency versions)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_cran.html" class="external-link">install_cran</a></span><span class="op">(</span><span class="st">"synapser"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"http://ran.synapse.org"</span>, <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>For a specific version:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install remotes if not already installed</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Install a specific version of synapser (e.g., version 2.1.1.259 - major.minor.patch.build)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_version.html" class="external-link">install_version</a></span><span class="op">(</span><span class="st">"synapser"</span>, version <span class="op">=</span> <span class="st">"X.Y.Z.AAA"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"http://ran.synapse.org"</span>, <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Manual Resolution (if you prefer to manage dependencies
yourself):</strong></p>
<ol style="list-style-type: decimal">
<li>
<p><strong>Remove the conflicting package:</strong></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">"rjson"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Install the compatible version using
remotes:</strong></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_version.html" class="external-link">install_version</a></span><span class="op">(</span><span class="st">"rjson"</span>, <span class="st">"0.2.21"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Also ensure you have the correct reticulate
version:</strong></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_version.html" class="external-link">install_version</a></span><span class="op">(</span><span class="st">"reticulate"</span>, <span class="st">"1.28"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Re-install synapser:</strong></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"synapser"</span>, repos<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"http://ran.synapse.org"</span>, <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="python-version-compatibility">Python Version Compatibility<a class="anchor" aria-label="anchor" href="#python-version-compatibility"></a>
</h3>
<p>Synapser is only compatible with Python versions 3.8 to 3.11. If
you’re using Python 3.12 or later, you may encounter installation or
runtime errors. We recommend using Python 3.10 for optimal
compatibility.</p>
<p>To check your Python version in R:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_config.html" class="external-link">py_config</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="r-version-compatibility">R Version Compatibility<a class="anchor" aria-label="anchor" href="#r-version-compatibility"></a>
</h3>
<p><strong>Important</strong>: synapser versions 2.1.0+ require R
versions 4.1.3 ≤ R &lt; 4.5. If you are using R ≥ 4.5, the installation
will automatically fall back to synapser 2.0.0 instead of the latest
version.</p>
<div class="section level4">
<h4 id="troubleshooting-r-version-issues">Troubleshooting R Version Issues:<a class="anchor" aria-label="anchor" href="#troubleshooting-r-version-issues"></a>
</h4>
<p><strong>Check your R version:</strong></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">R.version.string</span></span></code></pre></div>
<p><strong>If you have R ≥ 4.5:</strong> - You must downgrade to R 4.4.x
or earlier to install synapser 2.1.1+ - Otherwise, installation will
automatically select synapser 2.0.0 - This happens because R’s package
installer respects dependency constraints</p>
<p><strong>If installation selects 2.0.0 when you expect 2.1.1:</strong>
- Verify your R version is between 4.1.3 and 4.4.x - Check that your
reticulate version is ≤ 1.28 (required for synapser 2.1.x) - Consider
using the recommended installation method with version specification</p>
</div>
<div class="section level4">
<h4 id="how-to-downgrade-r-to-compatible-version">How to Downgrade R to Compatible Version<a class="anchor" aria-label="anchor" href="#how-to-downgrade-r-to-compatible-version"></a>
</h4>
<p><strong>Windows:</strong> 1. Download R 4.4.1 from <a href="https://cran.r-project.org/bin/windows/base/old/" class="external-link">CRAN Windows
archives</a> 2. Uninstall your current R version from Control Panel 3.
Install the downloaded R 4.4.1 installer 4. Restart RStudio to use the
new R version</p>
<p><strong>macOS:</strong> 1. Download R 4.4.1 from <a href="https://cran.r-project.org/bin/macosx/old/" class="external-link">CRAN macOS
archives</a> 2. Install the <code>.pkg</code> file (this will replace
your current R installation) 3. Restart RStudio to use the new R
version</p>
<p><strong>Linux (Ubuntu/Debian):</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Remove current R version</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">sudo</span> apt remove r-base r-base-core r-base-dev</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Add CRAN repository for specific R version</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="fu">sudo</span> apt install software-properties-common</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="fu">sudo</span> add-apt-repository <span class="st">"deb https://cloud.r-project.org/bin/linux/ubuntu </span><span class="va">$(</span><span class="ex">lsb_release</span> <span class="at">-cs</span><span class="va">)</span><span class="st">-cran40/"</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co"># Install R 4.4</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="fu">sudo</span> apt install r-base=4.4.1-1cran1.2004.0 r-base-core=4.4.1-1cran1.2004.0</span></code></pre></div>
<p><strong>Linux (Amazon Linux/RHEL/CentOS):</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Remove current R version</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">sudo</span> dnf remove R R-core R-devel</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># Option 1: Install from source (recommended for version control)</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="fu">sudo</span> dnf groupinstall <span class="at">-y</span> <span class="st">"Development Tools"</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="fu">sudo</span> dnf install <span class="at">-y</span> gcc-gfortran readline-devel libX11-devel libXt-devel <span class="dt">\</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    zlib-devel bzip2-devel xz-devel pcre2-devel curl-devel</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co"># Download and compile R 4.4.1</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="bu">cd</span> /tmp</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="fu">wget</span> https://cran.r-project.org/src/base/R-4/R-4.4.1.tar.gz</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-xzf</span> R-4.4.1.tar.gz</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="bu">cd</span> R-4.4.1</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--enable-R-shlib</span> <span class="at">--with-blas</span> <span class="at">--with-lapack</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="fu">sudo</span> make install</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="co"># Fix PATH if older R version is still being used</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'export PATH="/usr/local/bin:$PATH"'</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div>
<p><strong>Verify downgrade:</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">R.version.string</span></span>
<span><span class="co"># Should show something like "R version 4.4.1 (2024-06-14)"</span></span></code></pre></div>
<p><strong>Troubleshooting Amazon Linux R Installation:</strong> If
<code>which R</code> still shows an old R version after compilation:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Check current R location</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">which</span> R</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># If it shows /usr/local/R-4.5.1/bin/R instead of /usr/local/bin/R:</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="st">"/usr/local/bin:</span><span class="va">$PATH</span><span class="st">"</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'export PATH="/usr/local/bin:$PATH"'</span> <span class="op">&gt;&gt;</span> ~/.bashrc</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div>
<p><strong>After downgrading R:</strong> 1. Restart your R
session/RStudio 2. Reinstall synapser using the recommended method:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_cran.html" class="external-link">install_cran</a></span><span class="op">(</span><span class="st">"synapser"</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"http://ran.synapse.org"</span>, <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Verify you got the correct version:</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"synapser"</span><span class="op">)</span></span>
<span><span class="co"># Should show version 2.1.1 or later</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="using-synapser-with-reticulate">Using Synapser with reticulate<a class="anchor" aria-label="anchor" href="#using-synapser-with-reticulate"></a>
</h3>
<p>Synapser is compatible with <a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a> and the two
packages can be used together in the same R session.</p>
<p>If you are getting this kind error:</p>
<pre><code>synStore(tmp2)
Error in value[[3L]](cond) : 'concreteType'</code></pre>
<p>As of synapser v2.0.0, it is still only compatible with reticulate
v1.28 due to a miscellaneous update in <a href="https://rstudio.github.io/reticulate/news/index.html#misc-1-29" class="external-link">reticulate
v1.29</a>. Specifically, <code>py_to_r()</code> now succeeds when
converting subtypes of the built-in Python types (e.g. list, dict, str).
This change, while beneficial for general use, breaks synapser’s
internal type conversion mechanisms.</p>
<p><strong>Why this limitation exists:</strong> Synapser relies on
specific behavior in reticulate’s type conversion system to properly
handle Synapse objects and their metadata. The changes in reticulate
v1.29+ alter how Python objects are converted back to R, causing
compatibility issues with synapser’s architecture.</p>
<p>To install the compatible version:</p>
<pre><code><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_version.html" class="external-link">install_version</a></span><span class="op">(</span><span class="st">"reticulate"</span>, <span class="st">"1.28"</span><span class="op">)</span></span></code></pre>
<p><strong>Alternative approach:</strong> If you need to use a newer
version of reticulate for other projects, you can use the <a href="https://python-docs.synapse.org/build/html/index.html" class="external-link">Synapse
Python client</a> directly through reticulate instead of synapser.</p>
</div>
<div class="section level3">
<h3 id="type-conversions">Type Conversions<a class="anchor" aria-label="anchor" href="#type-conversions"></a>
</h3>
<p>The core of the Synapser library is the <a href="https://python-docs.synapse.org/" class="external-link">python client</a>. <a href="https://rstudio.github.io/reticulate/" class="external-link">Reticulate</a> is used to
translate R to Python and back.</p>
<p>These are the documented conversions from R to Python: <a href="https://rstudio.github.io/reticulate/articles/calling_python.html#type-conversions" class="external-link">Reticulate
Type Conversions</a></p>
<p><code>NA</code> values in R do not have a direct equivalent in
Python. This has been a topic of great discussion. Synapser is not
trying to solve this. <code>NA</code> values in R are handled by
Reticulate per the implementation defined in Reticulate.</p>
<p>When working with R and Reticulate, NA values in types tables are
converted by Reticulate depending on the data type.</p>
<p>For numeric data types, NA values are converted to the corresponding
R value <code>NA_real_</code>. For integer data types, NA values are
converted to <code>NA_integer_</code>. For logical data types, NA values
are converted to <code>NA_logical_</code>. For character data types, NA
values are converted to <code>NA_character_</code>.</p>
<p>In addition, Reticulate also converts any values that cannot be
coerced to the specified data type to <code>NA_character_</code>.</p>
<p>Reticulate performs these conversions automatically.</p>
<p>When Reticulate converts R objects to Python objects, the NA values
in R types tables are converted to Python’s <code>None</code>.</p>
<p>R’s <code>NA</code> is a logical constant of length 1 which is used
to represent the absence of a value. In Python, the equivalent of
<code>NA</code> is <code>None</code>, which is a special constant used
to indicate the absence of a value.</p>
<p>Reticulate automatically converts <code>NA</code> values in R types
tables to <code>None</code> when converting R objects to Python. This
ensures that the data types and values remain consistent between the two
languages.</p>
<p>Examples:</p>
<ul>
<li>Reticulate converts logical <code>NA</code>s to Python
<code>True</code>, which convert back to <code>TRUE</code> in R</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">na_logical</span> <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">na_logical</span><span class="op">)</span></span>
<span><span class="co">## [1] "logical"</span></span>
<span><span class="va">na_py</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">r_to_py</a></span><span class="op">(</span><span class="va">na_logical</span><span class="op">)</span></span>
<span><span class="va">na_py</span></span>
<span><span class="co">## True</span></span>
<span><span class="va">na_r</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">py_to_r</a></span><span class="op">(</span><span class="va">na_py</span><span class="op">)</span></span>
<span><span class="va">na_r</span></span>
<span><span class="co">## [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">na_logical</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">T</span>, <span class="cn">F</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">na_logical</span><span class="op">)</span></span>
<span><span class="co">## [1] "logical"</span></span>
<span><span class="va">na_py</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">r_to_py</a></span><span class="op">(</span><span class="va">na_logical</span><span class="op">)</span></span>
<span><span class="va">na_py</span></span>
<span><span class="co">## [True, False, True]</span></span>
<span><span class="va">na_r</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">py_to_r</a></span><span class="op">(</span><span class="va">na_py</span><span class="op">)</span></span>
<span><span class="va">na_r</span></span>
<span><span class="co">## [1]  TRUE FALSE  TRUE</span></span></code></pre></div>
<ul>
<li>Reticulate converts character <code>NA</code>s to Python strings,
which convert back to characters in R</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">na_char</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"F"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">na_char</span><span class="op">)</span></span>
<span><span class="co">## [1] "character"</span></span>
<span><span class="va">na_py</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">r_to_py</a></span><span class="op">(</span><span class="va">na_char</span><span class="op">)</span></span>
<span><span class="va">na_py</span></span>
<span><span class="co">## ['T', 'F', 'NA']</span></span>
<span><span class="va">na_r</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">py_to_r</a></span><span class="op">(</span><span class="va">na_py</span><span class="op">)</span></span>
<span><span class="va">na_r</span></span>
<span><span class="co">## [1] "T"  "F"  "NA"</span></span></code></pre></div>
<ul>
<li>Reticulate converts numeric <code>NA</code>s to Python
<code>np.nan</code>, which convert back to <code>NA</code> in R</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">na_num</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1538006762583</span>, <span class="fl">1538006762584</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">na_num</span><span class="op">)</span></span>
<span><span class="co">## [1] "numeric"</span></span>
<span><span class="va">na_py</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">r_to_py</a></span><span class="op">(</span><span class="va">na_num</span><span class="op">)</span></span>
<span><span class="va">na_py</span></span>
<span><span class="co">## [1538006762583.0, 1538006762584.0, nan]</span></span>
<span><span class="va">na_r</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/r-py-conversion.html" class="external-link">py_to_r</a></span><span class="op">(</span><span class="va">na_py</span><span class="op">)</span></span>
<span><span class="va">na_r</span></span>
<span><span class="co">## [1] 1.538007e+12 1.538007e+12           NA</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Dan Lu, Tom Yu, Bruce Hoff.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
